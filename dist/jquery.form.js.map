{"version":3,"file":"jquery.form.js","sources":["../src/form.js","../src/jquery.form.js"],"sourcesContent":["import _ from 'lodash'\n\nconst RULES={\n    tel:{\n        regExp:/^1[0-9]{10}$/,\n        des:'请输入有效的手机号'\n    },\n    email:{\n        regExp:/^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/,\n        des:'请输入有效的邮箱'\n    },\n    pwd:{\n        regExp:/^[a-zA-Z0-9]{6,20}$/,\n        des:'请输入6-20位数字/字母'\n    }\n};\nconst EVENT_ALL='all_event_263';\n\n/**\n * 表单验证的主要逻辑\n * */\nclass Form{\n    /**\n     * 创建一个表单管理<br>\n     *\n     * 注意：lengthErrorTempFunc为一个方法，返回一个错误信息模版\n     * <br>自定义验证规则rules里面func和regExp同时存在时执行func，忽略regExp\n     * <br>自定义验证规则rules里面func返回一个boolean的结果\n     * @param {object} options 表单验证配置信息\n     * @param {string} options.reqErrorTemp 空错误错误信息模版\n     * @param {function} options.lengthErrorTempFunc 长度校验错误信息模版方法\n     * @param {number} options.lengthErrorTempFunc.start 最小长度\n     * @param {number} options.lengthErrorTempFunc.end 最大长度\n     * @param {number} options.lengthErrorTempFunc.type 模版类型\n     * @param {object} options.rules 自定义规则\n     * @param {object} options.rules.key 规则名称\n     * @param {RegExp} options.rules.regExp 验证规则，正则表达式\n     * @param {string} options.rules.des 描述，当验证不通过时的错误信息模版\n     * @param {function} options.rules.func 验证规则，执行后返回验证结果\n     * */\n    constructor(options){\n        /**\n         * 将options里的配置参数和默认的配置参数merge后的最终参数\n         * */\n        this.options=this._merge({},{\n            reqErrorTemp:'%s不能为空',\n            lengthErrorTempFunc:function(start,end,type){\n                //type==1:必须等于 //type==2:必须大于 //type==3:必须小于\n                var msg={\n                    1:`%s必须为${start}个字符`,\n                    2:`%s必须大于${start}个字符`,\n                    3:`%s必须小于${end}个字符`\n                };\n                return msg[type];\n            },\n            rules:RULES\n        },options);\n\n        /**\n         * 用来储存校验字段的当前校验状态，以便下次同一校验字段进行校验时直接从cache中取得校验结果\n         * @private\n         * */\n        this._cache={};\n        /**\n         * 用来存储验证结果\n         * 1为已通过 2为正在校验 3为校验失败\n         * @private\n         * */\n        this._result={};\n        /**\n         * 用来缓存校验规则的解析结果\n         * @private\n         * */\n        this._ruleCache={};\n        /**\n         * 用来储存使用者对表单校验状态改变事件的监听的回调函数\n         * @deprecated\n         * event type说明:\n         *\n         * 1.all所有类型都执行回调函数\n         * 2.error校验中出现校验不通过情况，触发该事件，返回错误提示字符串，终止该字段的剩余校验过程\n         * 3.loading校验字段中存在用户自定义校验，并且调用用户自定义校验函数返回promise对象，触发该事件\n         * 4.pass执行校验的字段完成了所有的校验，并且全部通过校验\n         * @private\n         * */\n        this._events={};\n        /**\n         * middlewares用来储存使用者追加自定义表单校验规则的回调函数\n         * @private\n         * */\n        this._middlewares={};\n    }\n    /**\n     * 对字段进行校验\n     * @param {string} name 字段名\n     * @param {all} value 被校验字段的值\n     * @param {string} ruleStr 校验规则表达式\n     * @return {Promise} promise对象,验证结果如：promise.then((result)=>{})\n     * */\n    getValidateResult(name,value,ruleStr){\n        var rule=this._getRule(ruleStr);\n        var cache=this._getCache(name,value,ruleStr);\n        if(cache.status!==undefined){\n            return Promise.resolve(cache);\n        }\n        var returnResult=(result)=>{\n            if(result.loading===true){\n                if(result.status===true){\n                    this._triggerEvent('loaded', name, value);\n                }else{\n                    this._result[name]=2;\n                    this._triggerEvent('loading', name, value);\n                }\n            }else{\n                let cache={status:result.status,name,value,rule:ruleStr};\n                if(cache.status===false&&result.msg){\n                    cache.msg=result.msg;\n                }\n                this._setCache(cache);\n                if(result.status===true){\n                    this._result[name]=1;\n                    this._triggerEvent('pass', name, value);\n                }else{\n                    this._result[name]=3;\n                    this._triggerEvent('error', name, value);\n                }\n                return Promise.resolve(cache);\n            }\n        };\n        //空性判断\n        if(this.isEmpty(value)){\n            if(rule.req){\n                return returnResult({status:false,msg:this.options.reqErrorTemp});\n            }else{\n                return returnResult(cache.result={status:true});\n            }\n        }\n        //长度判断\n        if(value.length!=undefined&&rule.length&&rule.length.start){\n            if(rule.length.start===rule.length.end&&value.length!==rule.length.start){\n                return returnResult({status:false,msg:this.options.lengthErrorTempFunc(rule.length.start,rule.length.end,1)});\n            }\n            if(value.length<rule.length.start){\n                return returnResult({status:false,msg:this.options.lengthErrorTempFunc(rule.length.start,rule.length.end,2)});\n            }\n            if(rule.length.end&&value.length>rule.length.end){\n                return returnResult({status:false,msg:this.options.lengthErrorTempFunc(rule.length.start,rule.length.end,3)});\n            }\n        }\n        //类型判断\n        if(rule.type&&rule.type.length>0){\n            for(let key of rule.type){\n                let ruleType=this.options.rules[key];\n                if(ruleType&&ruleType.func&&typeof ruleType.func=='function'&&!ruleType.func(value)){\n                    return returnResult({status:false,msg:ruleType.des});\n                }else if(ruleType&&ruleType.regExp&&ruleType.regExp instanceof RegExp&&!ruleType.regExp.test(value)){\n                    return returnResult({status:false,msg:ruleType.des});\n                }\n            }\n        }\n        //用户自定义规则判断\n        var extraList=this._middlewares[name];\n        if(extraList&&extraList.length>0) {\n            returnResult({status:false,loading:true});\n            return Promise.all(extraList.map((extra)=>{\n                if(typeof extra=='function'){\n                    return new Promise((reslove,reject)=>{\n                        extra(value,(result)=>{\n                            if(result===true||result.status===true){\n                                reslove(result);\n                            }else{\n                                reject(result);\n                            }\n                        });\n                    });\n                }\n            })).then(()=>{\n                return returnResult({status:true});\n            },(result)=>{\n                return returnResult(result);\n            }).then((result)=>{\n                returnResult({status:true,loading:true});\n                return result;\n            });\n        }else{\n            return returnResult({status:true});\n        }\n    }\n    /**\n     * 对一组值调用getValidateResult进行校验\n     * @param {Array} dataArray 一组被校验值，格式如getValidateResult\n     * @return {Array} promise对象数组\n     * */\n    getFormValidateResult(dataArray){\n        return Promise.all(dataArray.map((field)=>{\n            return this.getValidateResult(field.name,field.value,field.rule);\n        }));\n    }\n    /**\n     * 判断当前表单中是否存在验证不通过字段，如果传入参数值name，则判断当前字段验证是否不通过\n     * @param {string} name 字段名\n     * @return {bool} 字段是否验证不通过\n     * */\n    isError(name){\n        if(name){\n            return this._result[name]===3;\n        }\n        return this._some(this._result,(result)=>result===3);\n    }\n    /**\n     * 判断当前表单中是否存在正在进行远程校验，如果传入参数值name，则判断当前字段验证是否正在进行远程校验\n     * @param {string} name 字段名\n     * @return {bool} 字段是否正在进行远程校验\n     * */\n    isLoading(name){\n        if(name){\n            return this._result[name]===2;\n        }\n        return this._some(this._result,(result)=>result===2);\n    }\n    /**\n     * 判断当前表单中的全部字段是否全都验证通过，如果传入参数值name，则判断当前字段验证是否验证通过\n     * @param {string} name 字段名\n     * @return {bool} 字段是否验证通过\n     * */\n    isPass(name){\n        if(name){\n            return this._result[name]===1;\n        }\n        return this._every(this._result,(result)=>result===1);\n    }\n    /**\n     * 判断当前值是不是满足表单空值判断\n     * @param {Anything} value  输入值\n     * @return {bool} 是否为空\n     * */\n    isEmpty(value){\n        return value===undefined||value===null||value===''||value.length==0||this._isEmptyObject(value);\n    }\n    /**\n     * 清除当前字段有关的验证缓存\n     * @param {string} name 字段名\n     * @return {Form} Form对象本身\n     * */\n    clearFieldCache(name){\n        if(this._cache[name]){\n            delete this._cache[name];\n        }\n        return this;\n    }\n    /**\n     * 清除所有字段有关的验证缓存\n     * @return {Form} Form对象本身\n     * */\n    clearAllCache(){\n        this._cache={};\n        return this;\n    }\n    /**\n     * 添加事件绑定\n     * @param {string} eventName 事件名称 pass：字段验证通过事件 loading：字段开始进行远程校验 error：字段校验不通过\n     * @param {string} name 字段名称（可选）\n     * @param {function} callback 事件触发后回调\n     * @return {Form} Form对象本身\n     * */\n    on(eventName,...args){\n        var name=args[0],callback=args[args.length-1];\n        if(typeof name!=='string'){\n            name=EVENT_ALL;\n        }\n        if(typeof callback!=='function'){\n            return;\n        }\n        eventName.split(' ').forEach((eventName)=>{\n            if(!this._events[eventName]){\n                this._events[eventName]={};\n            }\n            name.split(' ').forEach((name)=>{\n                if(!this._events[eventName][name]){\n                    this._events[eventName][name]=[];\n                }\n                this._events[eventName][name].push(callback);\n            });\n        });\n        return this;\n    }\n    /**\n     * 取消事件绑定\n     * @param {string} eventName 事件名称 pass：字段验证通过事件 loading：字段开始进行远程校验 error：字段校验不通过\n     * @param {string} name 字段名称（可选）\n     * @return {Form} Form对象本身\n     * */\n    off(eventName,name){\n        if(name){\n            if(this._events[eventName][name]){\n                this._events[eventName][name]=[];\n            }\n        }else{\n            this._events[eventName]={};\n        }\n        return this;\n    }\n    /**\n     * 追加字段的远程校验\n     * @param {string} name 字段名称，\n     * @param {function} callback 回调函数接受字段的值，返回一个验证结果对象或true\n     * @return {Form} Form对象本身\n     * */\n    use(name,callback){\n        if(typeof name!=='string'||typeof callback!=='function'){\n            return;\n        }\n\n        if(!this._middlewares[name]){\n            this._middlewares[name]=[];\n        }\n        this._middlewares[name].push(callback);\n        return this;\n    }\n    _getCache(name,value,rule){\n        var hashCode=this._getCacheCode(name,value,rule);\n        if(this._cache[hashCode]){\n            return this._cache[hashCode];\n        }else{\n            return {};\n        }\n    }\n    _setCache(result){\n        var hashCode=this._getCacheCode(result.name,result.value,result.rule);\n        delete result['rule'];\n        this._cache[hashCode]=result;\n    }\n    _getCacheCode(name,value,rule=''){\n        if(typeof value=='object'){\n            value=JSON.stringify(value).replace(/[\\{\\}\\[\\]\\\"\\:\\,]/g,'');\n        }else{\n            value+='';\n        }\n        rule=rule.replace(/[\\-\\s]/g,'');\n        \n        return this._jsHashCode(rule+name+value);\n    }\n    _jsHashCode(key){\n        var hash=1315423911;\n        for(var i=0;i<key.length;i++){\n            hash^=(hash<<5)+key.charCodeAt(i)+(hash>>2);\n        }\n        return (hash & 0x7FFFFFFF);\n    }\n    _getRule(rule=''){\n        if(this._ruleCache[rule]){\n            return this._ruleCache[rule];\n        }\n        var _rule={};\n        rule.split(' ').forEach((n)=>{\n            if(/^required|req$/i.test(n)){\n                _rule.req=true;\n            }else if(/^[0-9]+(-[0-9]+)?$/.test(n)){\n                if(_rule.length===undefined){\n                    let [start,end]=n.split('-');\n                    let length={start:parseInt(start)};\n                    if(end){\n                        end=parseInt(end);\n                        if(start<=end){\n                            length.end=end;\n                            _rule.length=length;\n                        }\n                    }else{\n                        _rule.length=length;\n                    }\n                }\n            }else if(this.options.rules[n]){\n                if(!_rule.type){\n                    _rule.type=[];\n                }\n                _rule.type.push(n);\n            }\n        });\n        return this._ruleCache[rule]=_rule;\n    }\n    _triggerEvent(eventType,name,value){\n        if(this._events[eventType]){\n            if(this._events[eventType][name]){\n                this._events[eventType][name].forEach((func)=>func(value,eventType,name));\n            }\n            if(this._events[eventType][EVENT_ALL]){\n                this._events[eventType][EVENT_ALL].forEach((func)=>func(value,eventType,name));\n            }\n        }\n    }\n\n\n    _isEmptyObject(value) {\n        return _.isObject(value)&&_.isEmpty(value);\n    }\n    _some(array,callback){\n       return _.some(array,callback);\n    }\n    _every(array,callback){\n        return _.every(array,callback);\n    }\n    _merge(...args){\n        return _.merge(...args);\n    }\n}\n\nexport default Form;","import Form from './form'\nimport _ from 'lodash'\nimport $ from 'jquery'\n\n/**\n * 用于jquery的UI逻辑封装\n * */\nclass JForm {\n    /**\n     * @param {Element} $el 被绑定的元素\n     * @param {Object} options 配置参数\n     * @param {string} options.fieldClass 字段选择器，用来标识一个字段\n     * @param {string} options.containerClass 字段容器选择器，用来标识字段容器，字段校验状态会添加到字段容器上\n     * @param {string} options.msgClass 字段错误信息容器选择器，用来标识字段错误信息容器，字段验证后的错误信息会显示在字段错误信息容器里面\n     * @param {string} options.errorClass 字段错误状态标识，用来把错误状态添加到字段容器上\n     * @param {bool} options.nullError 未提交表单时是否认为空状态是错误\n     * @param {function} options.callback 提交表单即调用submit方法时，表单所有字段验证通过调用该方法，参数为表单的值\n     * @param {number} options.delayTime 用户连续输入间隔多久进行下一次校验\n     * @param {bool} options.realTimeError 是否实时显示错误信息\n     * @param {Object} options.rules 自定义校验规则 参考Form里的相同参数\n     * @param {string} options.reqErrorTemp 空错误错误信息模版 参考Form里的相同参数\n     * @param {function} options.lengthErrorTempFunc 长度校验错误信息模版方法 参考Form里的相同参数\n     * */\n    constructor($el,options){\n        this.$el=$($el);\n        this.options=_.merge({},{\n            fieldClass:'J_form-field',\n            containerClass:'J_form-container',\n            msgClass:'J_form-msg',\n            msgErrorClass:'is-error',\n            errorClass:'form-error',\n            nullError:false,\n            callback:null,\n            delayTime:500,\n            realTimeError:true\n        },options);\n        this._form=new Form({\n            rules:this.options.rules,\n            reqErrorTemp:this.options.reqErrorTemp,\n            lengthErrorTempFunc:this.options.lengthErrorTempFunc\n        });\n        this._bindEvent();\n    }\n    /**\n     * 提交表单，如果有没有验证的字段则进行校验，所有字段均被校验并且全部都验证通过后执行options.callback，如果callback参数存在则执行callback，不执行options.callback\n     * @param {function} callback 所有字段验证通过后调用该方法，如果该方法返回值为false，则放弃执行options.callback方法\n     * @return {Promise} Promise对象，在then中可以传入验证全部结束回调\n     * */\n    submit(callback){\n        return Promise.all([].map.call(this.$el.find(`.${this.options.fieldClass}`),(target)=>{\n            return this.validate(target);\n        })).then((results)=>{\n            var allPass=true,data={};\n            results.forEach((result)=>{\n                this._setError(result,true);\n                if(result.status===true){\n                    data[result.name]=result.value;\n                }else{\n                    allPass=false;\n                }\n            });\n            if(allPass){\n                if(!(callback&&callback(data)===false)){\n                    this.options.callback&&this.options.callback(data);\n                }\n            }\n            return {pass:allPass,data}\n        });\n    }\n    /**\n     * 向某个字段错误状态和信息\n     * @param {name} 字段名\n     * @param {msg} 错误信息\n     * @return {JForm} JForm对象\n     * */\n    setError(name,msg){\n        this._setError({status:false,name,msg,value:this.getFieldValue(name)});\n        return this;\n    }\n    /**\n     * 同Form.prototype.use\n     * @return {JForm} JForm对象\n     * */\n    use(...args){\n        this._form.use(...args);\n        return this;\n    }\n    /**\n     * 同Form.prototype.on\n     * @return {JForm} JForm对象\n     * */\n    on(...args){\n        this._form.on(...args);\n        return this;\n    }\n    /**\n     * 同Form.prototype.isLoading\n     * */\n    isLoading(name){\n        return this._form.isLoading(name);\n    }\n    /**\n     * 同Form.prototype.isError\n     * */\n    isError(name){\n        return this._form.isError(name);\n    }\n    /**\n     * 同Form.prototype.isPass\n     * */\n    isPass(name){\n        return this._form.isPass(name);\n    }\n    /**\n     * 对一个字段进行验证\n     * @param {Element} target 字段元素\n     * @return {Object} 验证结果对象\n     * */\n    validate(target){\n        var $target=$(target);\n        var name=$target.attr('name'),value=this._getTargetValue(target),rule=$target.attr('rule');\n        return this._form.getValidateResult(name,value,rule);\n    }\n    /**\n     * 获取某个字段当前的值\n     * @param {string} name 字段名\n     * @reutrn {Anything} 字段当前值\n     * */\n    getFieldValue(name){\n        return this._getTargetValue(this.$el.find(`.${this.options.fieldClass}[name=\"${name}\"]`));\n    }\n    /**\n     * 给表单中的某个字段赋值\n     * @param {string} name 字段名\n     * @param {Anything} value  字段的值\n     * @return {JForm} JForm对象\n     * */\n    setFieldValue(name,value){\n        this._setTargetValue(this.$el.find(`.${this.options.fieldClass}[name=\"${name}\"]`),value);\n        return this;\n    }\n    /**\n     * 给整个表单赋值\n     * @param {Object} data 表单值\n     * @return {JForm} JForm对象\n     * */\n    setFormData(data){\n        _.each(data,(value,name)=>this.setFieldValue(name,value));\n        return this;\n    }\n    /**\n     * 清除表单校验缓存\n     * @param {string} name 表单值（可选）当没有传入name时，清除整个表单缓存，当传入name时只清除该字段的缓存\n     * @return {JForm} JForm对象\n     * */\n    clear(name){\n        if(name){\n            this._form.clearFieldCache(name);\n        }else{\n            this._form.clearAllCache();\n        }\n    }\n    _setError(result,fromSubmit){\n        var $outer=this.$el.find(`.${this.options.containerClass}_${result.name}`),\n            $msg=this.$el.find(`.${this.options.msgClass}_${result.name}`),\n            $field=this.$el.find(`.${this.options.fieldClass}[name=\"${result.name}\"]`),\n            label=$field.attr('label');\n        if($outer.length==0){\n            $outer=$field;\n        }\n        if(result.status===true||(!fromSubmit&&!this.options.nullError&&this._form.isEmpty(result.value))){\n            $outer.removeClass(this.options.errorClass);\n            $msg.removeClass(this.options.msgErrorClass).html('');\n        }else{\n            $outer.addClass(this.options.errorClass);\n            $msg.addClass(this.options.msgErrorClass).html(result.msg.replace('%s',label||'该字段'));\n        }\n        return this;\n    }\n    _setTargetValue(target,value){\n        var $target=$(target),name=$target.attr('name');\n        if($target.is('[data-value]')||$target.data('value')!==undefined||$target.is('div')){\n            $target.data('value',value).trigger('setFormData',value);\n        }else if($target.is('input:checkbox')){\n            if(!Array.isArray(value)){\n                value=[value];\n            }\n            this.$el.find(_.map(value,(itemValue)=>`.${this.options.fieldClass}[name=\"${name}\"][value=\"${itemValue}\"]`).join(',')).prop('checked',true);\n        }else if($target.is('input:radio')){\n            this.$el.find(`.${this.options.fieldClass}[name=\"${name}\"][value=\"${value}\"]:eq(0)`).prop('checked',true);\n        }else if($target.is('select')){\n            $target.children(`option[value=\"${value}\"]`).prop('selected',true);\n        }else{\n            $target.val(value);\n        }\n        return this;\n    }\n    _getTargetValue(target){\n        var $target=$(target),name=$target.attr('name');\n        if($target.is('[data-value]')||$target.data('value')!==undefined||$target.is('div')){\n            return $target.data('value');\n        }else if($target.is('input:checkbox')){\n            return _.map(this.$el.find(`.${this.options.fieldClass}[name=\"${name}\"]:checked`),(item)=>$(item).attr('value'));\n        }else if($target.is('input:radio')){\n            return this.$el.find(`.${this.options.fieldClass}[name=\"${name}\"]:checked`).attr('value');\n        }\n        return $target.val();\n    }\n    _bindEvent(){\n        var _this=this;\n        var triggerValidate=function(){\n            _this.validate(this).then(function(result){\n                _this._setError(result);\n            });\n        };\n        this.$el.on('blur dataChange',`.${this.options.fieldClass}`,triggerValidate)\n            .on('input',`.${this.options.fieldClass}`,_.debounce(function(){\n                    var res=_this.validate(this);\n                    if(_this.options.realTimeError){\n                res.then(function(result){\n                    _this._setError(result);\n                });\n            }\n                },this.options.delayTime))\n            .on('change',`.${this.options.fieldClass}[type=\"checkbox\"],.${this.options.fieldClass}[type=\"radio\"],.${this.options.fieldClass}[type=\"select\"]`,triggerValidate)\n            .on('focus',`.${this.options.fieldClass}`,function(){\n                _this._setError({\n                    status:true,\n                    name:$(this).attr('name')\n                });\n            });\n    }\n}\n\n/**\n * 注册jquery插件\n * */\n$.fn.form=function(options){\n    if($(this).length==0){\n        return new Error('选择器所选元素不能为空');\n    }\n    if($(this).length>1){\n        console.warn('选择器选中多个元素，默认只有第一个生效。请自行遍历jquery对象中的元素。');\n    }\n    return new JForm($(this)[0],options);\n}\n\nexport default JForm;"],"names":["RULES","EVENT_ALL","Form","options","_merge","start","end","type","msg","_cache","_result","_ruleCache","_events","_middlewares","getValidateResult","name","value","ruleStr","rule","_getRule","cache","_getCache","status","undefined","Promise","resolve","returnResult","result","loading","_triggerEvent","_setCache","isEmpty","req","reqErrorTemp","length","lengthErrorTempFunc","key","ruleType","rules","func","des","regExp","RegExp","test","extraList","all","map","extra","reslove","reject","then","getFormValidateResult","dataArray","field","isError","_some","isLoading","isPass","_every","_isEmptyObject","clearFieldCache","clearAllCache","on","eventName","callback","split","forEach","push","off","use","hashCode","_getCacheCode","JSON","stringify","replace","_jsHashCode","hash","i","charCodeAt","_rule","n","parseInt","eventType","_","isObject","array","some","every","merge","JForm","$el","$","_form","_bindEvent","submit","call","find","fieldClass","target","validate","results","allPass","data","_setError","pass","setError","getFieldValue","$target","attr","_getTargetValue","setFieldValue","_setTargetValue","setFormData","each","clear","fromSubmit","$outer","containerClass","$msg","msgClass","$field","label","nullError","removeClass","errorClass","msgErrorClass","html","addClass","is","trigger","Array","isArray","itemValue","join","prop","children","val","item","_this","triggerValidate","debounce","res","realTimeError","delayTime","fn","form","Error","warn"],"mappings":"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"}